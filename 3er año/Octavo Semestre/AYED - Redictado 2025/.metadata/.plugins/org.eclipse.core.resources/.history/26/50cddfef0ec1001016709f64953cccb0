package tp5;

import java.util.LinkedList;
import java.util.List;

public class ej6 { // public class BuscadorDeCaminos
	
	private Graph<String> bosque;

	public List <List<String>> recorridosMasSeguro() {
		boolean[] marca = new boolean[bosque.getSize()];
		LinkedList<String> recorridoActual = null;
		LinkedList<LinkedList<String>> recorridos = new LinkedList<LinkedList<String>>();
		int costo = 0;
		Vertex<String> comienzo = bosque.search("Casa Caperucita");
		if (comienzo != null) {
			Vertex<String> destino = bosque.search("Casa Abuelita");
			if (destino != null) {
				for (int i = 0; i < bosque.getSize(); i++) {
					recorridoActual = new LinkedList<String>();
					dfs(bosque, comienzo, destino, recorridoActual, recorridos, marca, costo);
				}
			}
		}
		return recorridos;
	}
	
	public void dfs(Graph<String> bosque, Vertex<String> vert, Vertex<String> destino, LinkedList<String> recorridoActual, LinkedList<LinkedList<String>> recorridos, boolean[] marca, int costo) {
		marca[vert.getPosition()] = true;
		recorridoActual.add(vert.getData().toString());
		if (vert.equals(destino)) {
			recorridos.add(new LinkedList<String>(recorridoActual));
		}
		else {
			List<Edge<String>> ady = bosque.getEdges(vert);
			for (Edge<String> a: ady) {
				if (a.getWeight() <= 5) && (!marca[a.getTarget().getPosition()]) {
					dfs(bosque, a.getTarget(), destino, recorridoActual, recorridos, marca, a.getWeight());
				}
			}
		}
		recorridoActual.remove(recorridoActual.size() - 1);
		marca[vert.getPosition()] = false;
	}
}
