; a) * Escribir un programa para imprimir la letra “A” utilizando la impresora a través de la PIO. 


PA EQU 30H
PB EQU 31H
CA EQU 32H
CB EQU 33H

ORG 1000H
CAR DB "ORGANIZACION Y ARQUITECTURA DE COMPUTADORAS"
FIN DB ?

ORG 2000H
; CONFIGURAMOS PIO PARA LA IMPRESORA
MOV AL, 11111101B ; 0 STROBE Y 1 BUSY SIEMPRE
OUT CA, AL

MOV AL, 00000000B ; TODO 0 SIEMPRE
OUT CB, AL

MOV BX, OFFSET CAR
; HAGO POLLING PARA LEER EL ESTADO DE BUSY DE LA IMPRESORA
POLL: IN AL, PA ; LEO EL ESTADO DE LA IMPRESORA
 AND AL, 1 ; TODO NUMERO AND 1 DA 1, ENTONCE SI LA IMPRESORA ESTA OCUPADA, DA 1 Y SE ACTIVA EL BUSY
 JNZ POLL

; MANDO EL CARACTER A PB QUE ES EL QUE MANDA LOS DATOS
MOV AL, [BX]
OUT PB, AL

; LEO DEVUELTA EL ESTADO Y PUSE EL STROBE EN 1 
IN AL, PA
OR AL, 00000010B
OUT PA, AL

; LEO DEVUELTA EL ESTADO Y PUSE EL STROBE EN 0
IN AL, PA
AND AL, 11111101B
OUT PA, AL

; INCREMENTO BX HASTA QUE LLEGUE AL FINAL
INC BX
CMP BX, OFFSET FIN
JNZ POLL

INT 0
END